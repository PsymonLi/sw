meta:
    name    : penctl
    os      : [ linux, freebsd ]
    nics    : [ pensando, mellanox, intel ]
    targetcount : 40 

testcases:
    -   name: ACCEL_METRICS
        testcase    : testcases.penctl.accel_metrics
        iterators   :
            type        : nested
            #cpumask     : [ 1 ]
            cpumask     :  [ 1 ]
            batch_depth :  [ 16 ]
        args    :
            blocksize   : 4096
            test        : cpdc.yml

    -   name    : CHECK_LOGS
        testcase: testcases.penctl.log
        iterators :
            type : simple
            option : ["nmd", "netagent", "tmagent"]

    -   name    : CHECK_EVENTS
        testcase: testcases.penctl.events

    -   name    : CHECK_CORES
        testcase: testcases.penctl.cores

    -   name    : CHECK_TIME
        testcase: testcases.penctl.time

    -   name    : CHECK_FIRMWARE
        testcase: testcases.penctl.firmware

    # Disabling this test for now, as it re-configures
    # interfaces which is breaking rdma_reg in regressions
    #-   name    : CHECK_METRICS
    #    testcase: testcases.penctl.lif_metrics

    -   name    : CHECK_EXECUTE
        testcase: testcases.penctl.execute
        iterators :
            type : simple
            command : [ "/nic/bin/halctl show endpoint --yaml",
                         "ls -al /nic/bin/ /nic/tools/" ]

    -   name    : CHECK_DIAG
        testcase: testcases.penctl.diag

    -   name    : CHECK_TECH_SUPPORT
        testcase: testcases.penctl.techsupport

    -   name    : CHECK_TECH_SUPPORT_COLL
        testcase: testcases.penctl.techsupport_coll

    -   name    : CHECK_MODE
        testcase: testcases.penctl.mode

    -   name    : CHECK_VERSION
        testcase: testcases.penctl.version

    -   name    : CHECK_TOP_HELP
        testcase: testcases.penctl.help
        iterators :
            type   : nested
            key    : [" "]
            option : ["delete", "list", "show", "system", "update",
                      "delete core",
                      "list cores",
                      "show events", "show firmware-version", "show logs", "show metrics", "show mode", "show proc-meminfo",
                      "show running-firmware", "show startup-firmware", "show system-memory-usage",
                      "show firmware-install", "show tech-support"
                     ]

    -   name    : MODE_UPDATE_INBAND_STATIC
        disable : True
        testcase: testcases.penctl.mode_inb_static

    -   name    : MODE_UPDATE_INBAND_STATIC_LOOP
        testcase: testcases.penctl.mode_inb_static_loop

    -   name    : MODE_UPDATE_INBAND_STATIC_REBOOT
        disable : True
        testcase: testcases.penctl.mode_inb_static_reboot

    -   name    : MODE_UPDATE_INBAND_DYNAMIC
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic

    -   name    : MODE_UPDATE_INBAND_DYNAMIC_LOOP
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_loop

    -   name    : MODE_UPDATE_INBAND_DYNAMIC_REBOOT
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_reboot

    -   name    : INBAND_DYNAMIC_LEASE_RENEWAL
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_lease_renewal

    -   name    : INBAND_DYNAMIC_REBOOT_KILL_DHCP
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_reboot_kill_dhcp

    -   name    : INBAND_DYNAMIC_REBOOT_EMPTY_VENDOR
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_empty_vendor

    -   name    : INBAND_DYNAMIC_REBOOT_ALL_NEW_VENDOR
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_loop_all_new

    -   name    : INBAND_DYNAMIC_REBOOT_PARTIAL_NEW_VENDOR
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_reboot_partial_new

    -   name    : INBAND_DYNAMIC_REBOOT_LOOP_CHECK_MODE
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_reboot_loop_mode

    -   name    : INBAND_DYNAMIC_LOOP_CHECK_NO_DHCP
        disable : True
        testcase: testcases.penctl.mode_inb_dynamic_no_dhcp

    -   name    : COMMON
        disable : True
        testcase: testcases.penctl.test_common

    -   name    : MODE_UPDATE_OOB_STATIC
        disable : True
        testcase: testcases.penctl.mode_oob_static

    -   name    : MODE_UPDATE_OOB_STATIC_LOOP
        testcase: testcases.penctl.mode_oob_static_loop

    -   name    : MODE_UPDATE_OOB_STATIC_REBOOT
        disable : True
        testcase: testcases.penctl.mode_oob_static_reboot

    -   name    : MODE_UPDATE_OOB_DYNAMIC
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic

    -   name    : MODE_UPDATE_OOB_DYNAMIC_LOOP
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_loop

    -   name    : MODE_UPDATE_OOB_DYNAMIC_REBOOT
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_reboot

    -   name    : OOB_DYNAMIC_LEASE_RENEWAL
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_lease_renewal

    -   name    : OOB_DYNAMIC_REBOOT_KILL_DHCP
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_reboot_kill_dhcp

    -   name    : OOB_DYNAMIC_REBOOT_EMPTY_VENDOR
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_empty_vendor

    -   name    : OOB_DYNAMIC_REBOOT_ALL_NEW_VENDOR
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_loop_all_new

    -   name    : OOB_DYNAMIC_REBOOT_PARTIAL_NEW_VENDOR
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_reboot_partial_new

    -   name    : OOB_DYNAMIC_REBOOT_LOOP_CHECK_MODE
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_reboot_loop_mode

    -   name    : OOB_DYNAMIC_LOOP_CHECK_NO_DHCP
        disable : True
        testcase: testcases.penctl.mode_oob_dynamic_no_dhcp
