meta:
    name    : rdma
    os      : [ linux, freebsd ]
    nics    : [ pensando, mellanox ]
    targetcount : 150

testcases:
    #=======================================
    # Init
    #=======================================
    -   name    : Insmod_Rdma
        testcase: testcases.rdma.insmod_rdma
        args    :
            type: remote_only

    -   name    : Show_Gid
        testcase: testcases.rdma.show_gid
        args    :
            type: remote_only

    -   name    : Intf_Mtu
        testcase: testcases.rdma.intf_mtu
        args    :
            type: remote_only

    #=======================================
    # Ping Pong
    #=======================================
    -   name    : Rc_PingPong
        testcase: testcases.rdma.rc_pingpong
        args    :
            type: remote_only

    -   name    : Ud_PingPong
        testcase: testcases.rdma.ud_pingpong
        args    :
            type: remote_only

    #=======================================
    # Send
    #=======================================
    -   name    : Rc_SendBw_Only_TcpCm
        testcase: testcases.rdma.rc_send_bw
        iterators :
            type    : nested
            num_qp: [1, 8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Only_RdmaCm
        testcase: testcases.rdma.rc_send_bw
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Fml
        testcase: testcases.rdma.rc_send_bw_fml
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Fml_Pad
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [1, 2]
            threads  : [1]
            rdma_cm  : [ 'no']
            server   : [ 'yes', 'no']
            mtu      : [4096]
            size     : [12601]
            transport: ['RC']
            command  : ['ib_send_bw']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Fml_16Sge
        testcase: testcases.rdma.rc_send_bw_fml_16sge
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Only_Inline_TcpCm
        testcase: testcases.rdma.rc_send_bw_inline
        iterators :
            type    : nested
            num_qp: [1, 8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Only_Inline_RdmaCm
        testcase: testcases.rdma.rc_send_bw_inline
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Only_Bidir_TcpCm
        testcase: testcases.rdma.rc_send_bw_bidir
        iterators :
            type    : nested
            num_qp: [1, 8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Only_Bidir_RdmaCm
        testcase: testcases.rdma.rc_send_bw_bidir
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_SendBw_Fml_16Sge_Bidir
        testcase: testcases.rdma.rc_send_bw_fml_16sge_bidir
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_SendLat_Only
        testcase: testcases.rdma.rc_send_lat
        args    :
            type: remote_only

    -   name    : Rc_SendLat_Fml_16Sge
        testcase: testcases.rdma.rc_send_lat_16sge
        args    :
            type: remote_only

    #=======================================
    # Write
    #=======================================
    -   name    : Rc_WriteBw_Only
        testcase: testcases.rdma.rc_write_bw
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Fml_TcpCm
        testcase: testcases.rdma.rc_write_bw_fml
        iterators :
            type    : nested
            num_qp: [1, 2]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Fml_RdmaCm
        testcase: testcases.rdma.rc_write_bw_fml
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Fml_Pad
        testcase: testcases.rdma.rc_write_bw_fml_pad
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Only_Inline
        testcase: testcases.rdma.rc_write_bw_inline
        iterators :
            type    : simple
            num_qp: [1, 2]
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Only_Bidir_TcpCm
        testcase: testcases.rdma.rc_write_bw_bidir
        iterators :
            type    : nested
            num_qp: [1, 8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_WriteBw_Only_Bidir_RdmaCm
        testcase: testcases.rdma.rc_write_bw_bidir
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_WriteLat_Only
        testcase: testcases.rdma.rc_write_lat
        args    :
            type: remote_only

    #=======================================
    # Read
    #=======================================
    -   name    : Rc_ReadBw_Only_TcpCm
        testcase: testcases.rdma.rc_read_bw
        iterators :
            type    : nested
            num_qp: [1,8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_ReadBw_Only_RdmaCm
        testcase: testcases.rdma.rc_read_bw
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_ReadBw_Fml
        testcase: testcases.rdma.rc_read_bw_fml
        iterators :
            type    : simple
            num_qp: [1]
        args    :
            type: remote_only

    -   name    : Rc_ReadBw_Fml_Pad
        testcase: testcases.rdma.rc_read_bw_fml_pad
        iterators :
            type    : simple
            num_qp: [1]
        args    :
            type: remote_only

    -   name    : Rc_ReadBw_Only_Bidir_TcpCm
        testcase: testcases.rdma.rc_read_bw_bidir
        iterators :
            type    : nested
            num_qp: [1,8]
            rdma_cm: ['no']
        args    :
            type: remote_only

    -   name    : Rc_ReadBw_Only_Bidir_RdmaCm
        testcase: testcases.rdma.rc_read_bw_bidir
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes']
        args    :
            type: remote_only

    -   name    : Rc_ReadLat_Only
        testcase: testcases.rdma.rc_read_lat
        args    :
            type: remote_only

    #=======================================
    # Vlan
    #=======================================
    -   name    : Rc_Bw_Only_Bidir_Vlan
        testcase: testcases.rdma.rc_bw_bidir_vlan
        iterators :
            type    : nested
            num_qp: [1]
            rdma_cm: ['yes','no']
            flip: ['yes','no']
            test: ['send','write','read']
        args    :
            type: remote_only

    #=======================================
    # Atomic
    #=======================================
    #-   name    : Rc_AtomicBw_FetchNAdd
    #    testcase: testcases.rdma.rc_atomic_bw
    #    args    :
    #        type: remote_only

    #-   name    : Rc_AtomicBw_CmpNSwap
    #    testcase: testcases.rdma.rc_atomic_bw
    #    args    :
    #        type: remote_only

    #=======================================
    # RPing
    #=======================================
    -   name    : Rping
        testcase: testcases.rdma.rping
        args    :
            type: remote_only
        iterators :
            type    : nested
            pktsize : [23, 32, 64, 65, 128, 256, 512, 1024, 1025, 2048, 4096, 8191, 8192, 9131, 16384, 65535]
            server  : [ 'yes', 'no']

    #=======================================
    # KRping
    #=======================================
    -   name    : KRping
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            server_inv: ['yes', 'no']
            local_dma_lkey: ['yes', 'no']

    -   name    : KRping_Sweep
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            server_inv: ['yes']
            local_dma_lkey: ['yes']
            size: [4096, 65536]

    -   name    : KRping_TxDepth
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            server_inv: ['yes']
            local_dma_lkey: ['yes']
            txdepth: [256, 1021]
            count: [5, 100, 2000]

    -   name    : KRping_Fr
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            fr: ['yes']
            txdepth: [512]
            count: [1000]

    #=======================================
    # Teardown
    #=======================================
    -   name    : Rmmod_Rdma
        testcase: testcases.rdma.rmmod_rdma
        args    :
            type: remote_only

