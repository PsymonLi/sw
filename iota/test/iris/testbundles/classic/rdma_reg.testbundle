meta:
    name    : rdma_reg
    os      : [ linux, freebsd ]
    nics    : [ pensando, mellanox ]
    targetcount : 300

testcases:
    #=======================================
    # Init
    #=======================================
    -   name    : Insmod_Rdma
        testcase: testcases.rdma.insmod_rdma
        args    :
            type: remote_only

    -   name    : Show_Gid
        testcase: testcases.rdma.show_gid
        args    :
            type: remote_only

    -   name    : Intf_Mtu
        testcase: testcases.rdma.intf_mtu
        args    :
            type: remote_only

    #=======================================
    # Ping Pong
    #=======================================
    #-   name    : Rc_PingPong
    #    testcase: testcases.rdma.rc_pingpong
    #    args    :
    #        type: remote_only

    #-   name    : Ud_PingPong
    #    testcase: testcases.rdma.ud_pingpong
    #    args    :
    #        type: remote_only

    #=======================================
    # Packet Sweep
    #=======================================
    -   name    : RC_TCPCM_Packet_Sweep
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [1, 8, 64]
            threads  : [1]
            rdma_cm  : [ 'no']
            server   : [ 'yes', 'no']
            mtu      : [512, 1024, 2048, 4096]
            transport: ['RC']
            command  : ['ib_send_bw', 'ib_write_bw', 'ib_read_bw']

    -   name    : RC_TCPCM_Packet_Sweep_127QPs
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [127]
            threads  : [1]
            rdma_cm  : [ 'no']
            server   : [ 'yes', 'no']
            mtu      : [512, 1024, 2048, 4096]
            transport: ['RC']
            command  : ['ib_send_bw', 'ib_write_bw', 'ib_read_bw']

    -   name    : RC_TCPCM_Packet_Sweep_1KQPs
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [125]
            threads  : [8]
            rdma_cm  : [ 'no']
            server   : [ 'yes', 'no']
            mtu      : [4096]
            transport: ['RC']
            command  : ['ib_send_bw', 'ib_write_bw', 'ib_read_bw']

    -   name    : RC_RDMACM_Packet_Sweep
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [1]
            threads  : [1]
            rdma_cm  : [ 'yes']
            server   : [ 'yes', 'no']
            mtu      : [512, 1024, 2048, 4096]
            transport: ['RC']
            command  : ['ib_send_bw', 'ib_write_bw', 'ib_read_bw']

    -   name    : UD_TCPCM_Packet_Sweep
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [1, 8, 64, 127]
            threads  : [1]
            rdma_cm  : [ 'no']
            server   : [ 'yes', 'no']
            mtu      : [512, 1024, 2048, 4096]
            transport: ['UD']
            command  : ['ib_send_bw']

    -   name    : UD_RDMACM_Packet_Sweep
        testcase: testcases.rdma.packet_sweep
        stress  : True
        iterators :
            type     : nested
            num_qp   : [1]
            threads  : [1]
            rdma_cm  : [ 'yes']
            server   : [ 'yes', 'no']
            mtu      : [512, 1024, 2048, 4096]
            transport: ['UD']
            command  : ['ib_send_bw']


    #=======================================
    # KRping Sweep
    #=======================================
    -   name    : KRping_Sweep_Size
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            server_inv: ['yes']
            local_dma_lkey: ['yes']
            size: [64,128,256,512,700,801,1024,2048,4096,8192,16384,32768,65536,131072]
            count: [2000,10000]

    -   name    : KRping_Sweep_TxDepth_Count
        testcase: testcases.rdma.krping
        args    :
            type: remote_only
        iterators :
            type    : nested
            server_inv: ['yes', 'no']
            local_dma_lkey: ['yes', 'no']
            size: [4096]
            txdepth: [256, 512, 1021]
            count: [5,100,2000,10000]

    #=======================================
    # Teardown
    #=======================================
    -   name    : Rmmod_Rdma
        testcase: testcases.rdma.rmmod_rdma
        args    :
            type: remote_only

