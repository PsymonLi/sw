meta:
    name    : underlay
    os      : [ linux ]
    nicmode : classic
    nics    : [ pensando ]

testcases:
    -   name    : Ping_Underlay_Workloads
        testcase: testcases.underlay.ping
        stress  : True
        iterators :
            type    : nested
            #ipaf    : [ ipv4, ipv6 ]
            ipaf    : [ ipv4 ]
            #pktsize : [ 64, 128, 256, 512, 1024, 2048, 4096, 8192 ]
            pktsize : [ 64, 128, 1024 ]

    -   name    : Ping_Underlay_Workloads_With_Flap
        testcase: testcases.underlay.ping
        stress  : True
        args    :
            ping_count: 200
            ping_interval: 0.1
        iterators :
            type    : nested
            #ipaf    : [ ipv4, ipv6 ]
            ipaf    : [ ipv4 ]
            #pktsize : [ 64, 128, 256, 512, 1024, 2048, 4096, 8192 ]
            pktsize : [ 64, 128 ]
        background_tasks:
            switchPortFlap  :
                trigger         : once
                sleep_interval  : 5
                terminate       : verify

    -   name    : Ping_loopback_0
        testcase: testcases.underlay.loopback_ping
        stress  : True
        iterators :
            type    : nested
            #ipaf    : [ ipv4, ipv6 ]
            ipaf    : [ ipv4 ]
            #pktsize : [ 64, 128, 256, 512, 1024, 2048, 4096, 8192 ]
            pktsize : [ 64 ]

    -   name    : flap_switch_ports
        testcase: testcases.triggers.switch_flap
        args    :
            flap_count : 1
            num_ports : 1
            interval : 5
            down_time : 5

    -   name    : Ping_loopback_1
        testcase: testcases.underlay.loopback_ping
        stress  : True
        iterators :
            type    : nested
            ipaf    : [ ipv4 ]
            pktsize : [ 64 ]

    -   name    : Ping_loopback_with_flap
        testcase: testcases.underlay.loopback_ping
        stress  : True
        args    :
            ping_count: 200
            ping_interval: 0.1
        iterators :
            type    : nested
            ipaf    : [ ipv4 ]
            pktsize : [ 64 ]
        background_tasks:
            switchPortFlap  :
                trigger         : once
                sleep_interval  : 5
                terminate       : verify

    -   name    : flap_switch_ports
        testcase: testcases.triggers.switch_flap
        args    :
            flap_count : 1
            num_ports : 2
            interval : 5
            down_time : 5

    -   name    : Ping_loopback_2
        testcase: testcases.underlay.loopback_ping
        stress  : True
        iterators :
            type    : nested
            ipaf    : [ ipv4 ]
            pktsize : [ 64 ]

    -   name    : RebootOS
        testcase: testcases.reboot.reboot
        args    :
            reboot_count: 1
            restart_mode: 'reboot'

    -   name    : Ping_loopback_3
        testcase: testcases.underlay.loopback_ping
        stress  : True
        iterators :
            type    : nested
            ipaf    : [ ipv4 ]
            pktsize : [ 64 ]
