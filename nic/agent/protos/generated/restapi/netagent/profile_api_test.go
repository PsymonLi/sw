// Code generated by protoc-gen-grpc-pensando DO NOT EDIT.

/*
Package netproto is a auto generated package.
Input file: profile.proto
*/
package restapi_test

import (
	"testing"

	"github.com/pensando/sw/api"
	"github.com/pensando/sw/nic/agent/protos/netproto"
	"github.com/pensando/sw/venice/utils/netutils"
	. "github.com/pensando/sw/venice/utils/testutils"
)

func TestProfileList(t *testing.T) {
	t.Parallel()
	var ok bool
	var profileList []*netproto.Profile

	err := netutils.HTTPGet("http://"+agentRestURL+"/api/profiles/", &profileList)

	AssertOk(t, err, "Error getting profiles from the REST Server")
	for _, o := range profileList {
		if o.Name == "preCreatedProfile" {
			ok = true
			break
		}
	}
	if !ok {
		t.Errorf("Could not find preCreatedProfile in Response: %v", profileList)
	}

}

func TestProfilePost(t *testing.T) {
	t.Parallel()
	var resp Response
	var ok bool
	var profileList []*netproto.Profile

	AssertOk(t, err, "Error posting profile to REST Server")
	AssertOk(t, getErr, "Error getting profiles from the REST Server")
	for _, o := range profileList {
		if o.Name == "testPostProfile" {
			ok = true
			break
		}
	}
	if !ok {
		t.Errorf("Could not find testPostProfile in Response: %v", profileList)
	}

}

func TestProfileDelete(t *testing.T) {
	t.Parallel()
	var resp Response
	var found bool
	var profileList []*netproto.Profile

	AssertOk(t, postErr, "Error posting profile to REST Server")
	AssertOk(t, err, "Error deleting profile from REST Server")
	AssertOk(t, getErr, "Error getting profiles from the REST Server")
	for _, o := range profileList {
		if o.Name == "testDeleteProfile" {
			found = true
			break
		}
	}
	if found {
		t.Errorf("Found testDeleteProfile in Response after deleting: %v", profileList)
	}

}

func TestProfileUpdate(t *testing.T) {
	t.Parallel()
	var resp Response
	var profileList []*netproto.Profile

}

func TestProfileCreateErr(t *testing.T) {
	t.Parallel()
	var resp Response
	badPostData := netproto.Profile{
		TypeMeta: api.TypeMeta{Kind: "Profile"},
		ObjectMeta: api.ObjectMeta{
			Name: "",
		},
	}

	Assert(t, err != nil, "Expected test to error out with 500. It passed instead")
}

func TestProfileDeleteErr(t *testing.T) {
	t.Parallel()
	var resp Response
	badDelData := netproto.Profile{
		TypeMeta: api.TypeMeta{Kind: "Profile"},
		ObjectMeta: api.ObjectMeta{Tenant: "default",
			Namespace: "default",
			Name:      "badObject"},
	}

	Assert(t, err != nil, "Expected test to error out with 500. It passed instead")
}

func TestProfileUpdateErr(t *testing.T) {
	t.Parallel()
	var resp Response
	badDelData := netproto.Profile{
		TypeMeta: api.TypeMeta{Kind: "Profile"},
		ObjectMeta: api.ObjectMeta{Tenant: "default",
			Namespace: "default",
			Name:      "badObject"},
	}

	Assert(t, err != nil, "Expected test to error out with 500. It passed instead")
}
