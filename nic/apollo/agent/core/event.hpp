//------------------------------------------------------------------------------
// {C} Copyright 2020 Pensando Systems Inc. All rights reserved
// -----------------------------------------------------------------------------

#ifndef __CORE_EVENT_HPP__
#define __CORE_EVENT_HPP__

#include "nic/sdk/include/sdk/base.hpp"

/// \brief events generated by PDS agent
typedef enum pds_event_id_e {
    PDS_EVENT_ID_NONE,
    PDS_EVENT_ID_PORT_CREATE,
    PDS_EVENT_ID_PORT_UP,
    PDS_EVENT_ID_PORT_DOWN,
    PDS_EVENT_ID_LIF_CREATE,
    PDS_EVENT_ID_LIF_UPDATE,
    PDS_EVENT_ID_LIF_UP,
    PDS_EVENT_ID_LIF_DOWN,
    PDS_EVENT_ID_MAX,
} pds_event_id_t;

/// \brief event operation
typedef enum pds_event_op_e {
    PDS_EVENT_OP_NONE,
    PDS_EVENT_OP_SUBSCRIBE,
    PDS_EVENT_OP_UNSUBSCRIBE,
} pds_event_op_t;

/// \brief event subscribe/unsubscribe request from app(s)
typedef struct pds_event_spec_s {
    /// event of interest
    pds_event_id_t event_id;
    /// operation - SUBSCRIBE or UNSUBSCRIBE
    pds_event_op_t event_op;
} __PACK__ pds_event_spec_t;

namespace core {

/// \brief handle the incoming event subscribe/unsubscribe event
/// \param[in] spec    pointer to the event spec
/// \param[in] ctxt    client specific context
/// \return    SDK_RET_OK on success, failure status code on error
sdk_ret_t handle_event_request(const pds_event_spec_t *spec, void *ctxt);

/// \brief update the state of the event listener in the event manager
/// \param[in] ctxt    client specific context
/// \return    SDK_RET_OK on success, failure status code on error
sdk_ret_t update_event_listener(void *ctxt);

}    // namespace core

#endif    // __CORE_EVENT_HPP__
