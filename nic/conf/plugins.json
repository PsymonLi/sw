{
    "plugins": [
        {
            "name"      : "network",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_network.so",
            "init_func" : "network_init",
            "exit_func" : "network_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : [
                "stage-marker",
                "fwding",
                "fwding-pre-stage",
                "tunnel",
                "qos",
                "rdma",
                "ingress-checks"
            ]
        },
        {
            "name"      : "alg_utils",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_utils.so",
            "init_func" : "alg_utils_init",
            "exit_func" : "alg_utils_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["alg_utils"]
        },
        {
            "name"      : "sfw",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_sfw.so",
            "init_func" : "sfw_init",
            "exit_func" : "sfw_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/alg_utils"],
            "features"  : [
                "sfw",
                "conntrack"
            ]
        },
        {
            "name"      : "alg_sip",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_sip.so",
            "init_func" : "alg_sip_init",
            "exit_func" : "alg_sip_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_sip"]
        },
        {
            "name"      : "alg_tftp",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_tftp.so",
            "init_func" : "alg_tftp_init",
            "exit_func" : "alg_tftp_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_tftp"]
        },
        {
            "name"      : "alg_dns",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_dns.so",
            "init_func" : "alg_dns_init",
            "exit_func" : "alg_dns_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_dns"]
        },
        {
            "name"      : "alg_rpc",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_rpc.so",
            "init_func" : "alg_rpc_init",
            "exit_func" : "alg_rpc_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_rpc"]
        },
        {
            "name"      : "alg_rtsp",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_rtsp.so",
            "init_func" : "alg_rtsp_init",
            "exit_func" : "alg_rtsp_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_rtsp"]
        },
        {
            "name"      : "alg_ftp",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_alg_ftp.so",
            "init_func" : "alg_ftp_init",
            "exit_func" : "alg_ftp_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/sfw", "pensando.io/alg_utils"],
            "features"  : ["alg_ftp"]
        },
        {
            "name"      : "eplearn",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_ep_learn.so",
            "init_func" : "eplearn_init",
            "exit_func" : "eplearn_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["eplearn"]
        },
        {
            "name"      : "lb",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_lb.so",
            "init_func" : "lb_init",
            "exit_func" : "lb_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["lb"]
        },
        {
            "name"      : "nat",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_nat.so",
            "init_func" : "nat_init",
            "exit_func" : "nat_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["nat"]
        },
        {
            "name"      : "dol",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_dol.so",
            "init_func" : "dol_init",
            "exit_func" : "dol_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["test"]
        },
        {
            "name"      : "proxy",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_proxy.so",
            "init_func" : "proxy_plugin_init",
            "exit_func" : "proxy_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : [
                "tcp",
                "tcp-trigger-connection",
                "quiesce",
                "tls",
                "ipsec",
                "app-p4pt"
            ]
        },
        {
            "name"      : "app-redir",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_app_redir.so",
            "init_func" : "app_redir_plugin_init",
            "exit_func" : "app_redir_plugin_exit",
            "thread_init_func" : "app_redir_thread_init",
            "thread_exit_func" : "app_redir_thread_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : [
                "app-redir-miss",
                "app-redir",
                "app-redir-fini",
                "app-redir-appid"
            ]
        },
        {
            "name"      : "lif",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_lif.so",
            "init_func" : "lif_init",
            "exit_func" : "lif_exit",
            "auto_load" : "true"
        },
        {
            "name"      : "nw",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_nw.so",
            "thread_init_func" : "nw_thread_init",
            "auto_load" : "true",
            "deps"      : ["pensando.io/lif"]
        },
        {
            "name"      : "aclqos",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_aclqos.so",
            "init_func" : "aclqos_init",
            "exit_func" : "aclqos_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "natcfg",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_nat.so",
            "init_func" : "natcfg_init",
            "exit_func" : "natcfg_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "telemetrycfg",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_telemetry.so",
            "init_func" : "telemetrycfg_init",
            "exit_func" : "telemetrycfg_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "telemetry",
            "provider"  : "pensando.io",
            "lib"       : "libplugin_telemetry.so",
            "init_func" : "telemetry_init",
            "exit_func" : "telemetry_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"],
            "features"  : ["telemetry"]
        },
        {
            "name"      : "mcast",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_mcast.so",
            "init_func" : "mcast_init",
            "exit_func" : "mcast_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "ipsec",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_ipsec.so",
            "init_func" : "ipsec_init",
            "exit_func" : "ipsec_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "rdma",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_rdma.so",
            "init_func" : "rdma_init",
            "exit_func" : "rdma_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "gft",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_gft.so",
            "init_func" : "gft_init",
            "exit_func" : "gft_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "l4lbcfg",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_l4lb.so",
            "init_func" : "l4lbcfg_init",
            "exit_func" : "l4lbcfg_exit",
            "auto_load" : "true",
            "deps"      : ["pensando.io/nw"]
        },
        {
            "name"      : "accelcfg",
            "provider"  : "pensando.io",
            "lib"       : "libcfg_plugin_accel.so",
            "init_func" : "accelcfg_init",
            "exit_func" : "accelcfg_exit",
            "thread_init_func" : "accelcfg_thread_init",
            "thread_exit_func" : "accelcfg_thread_exit",
            "auto_load" : "true",
            "deps"      : [],
            "features"  : ["accel_rgroup"]
        }
    ],

    "pipelines": [
        {
            "name": "flow-miss",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_FLOWMISS" },
            "outbound_features": [
                "pensando.io/dol:test",
                "pensando.io/network:ingress-checks",
                "pensando.io/telemetry:telemetry",
                "pensando.io/eplearn:eplearn",
                "pensando.io/sfw:sfw",
                "pensando.io/sfw:conntrack",
                "pensando.io/alg_ftp:alg_ftp",
                "pensando.io/alg_tftp:alg_tftp",
                "pensando.io/alg_dns:alg_dns",
                "pensando.io/alg_rpc:alg_rpc",
                "pensando.io/alg_rtsp:alg_rtsp",
                "pensando.io/proxy:tcp",
                "pensando.io/sfw:sfw",
                "pensando.io/network:qos",
                "pensando.io/network:fwding-pre-stage",
                "pensando.io/network:stage-marker",
                "pensando.io/lb:lb",
                "pensando.io/nat:nat",
                "pensando.io/network:qos",
                "pensando.io/network:rdma",
                "pensando.io/proxy:ipsec",
                "pensando.io/network:fwding",
                "pensando.io/network:tunnel",
                "pensando.io/proxy:tcp-trigger-connection"
            ],
            "inbound_features": [
                "pensando.io/dol:test",
                "pensando.io/network:ingress-checks",
                "pensando.io/telemetry:telemetry",
                "pensando.io/sfw:sfw",
                "pensando.io/eplearn:eplearn",
                "pensando.io/nat:nat",
                "pensando.io/lb:lb",
                "pensando.io/proxy:tcp",
                "pensando.io/sfw:sfw",
                "pensando.io/network:qos",
                "pensando.io/network:rdma",
                "pensando.io/network:fwding-pre-stage",
                "pensando.io/network:stage-marker",
                "pensando.io/sfw:sfw",
                "pensando.io/sfw:conntrack",
                "pensando.io/alg_ftp:alg_ftp",
                "pensando.io/alg_tftp:alg_tftp",
                "pensando.io/alg_dns:alg_dns",
                "pensando.io/alg_rpc:alg_rpc",
                "pensando.io/alg_rtsp:alg_rtsp",
                "pensando.io/network:qos",
                "pensando.io/proxy:ipsec",
                "pensando.io/network:fwding",
                "pensando.io/network:tunnel",
                "pensando.io/proxy:tcp-trigger-connection"
           ]
        },
        {
            "name": "tcp-close",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_TCP_CLOSE" },
            "outbound_features": [
                 "pensando.io/dol:test",
                 "pensando.io/sfw:conntrack"
            ]
        },
        {
            "name": "app-redir",
            "selector": { "lif": "SERVICE_LIF_APP_REDIR", "qtype_mask": 1, "qtype": 0},
            "outbound_features": [
                "pensando.io/app-redir:app-redir",
                "pensando.io/app-redir:app-redir-appid",
                "pensando.io/sfw:sfw",
                "pensando.io/network:qos",
                "pensando.io/network:fwding",
                "pensando.io/network:tunnel",
                "pensando.io/app-redir:app-redir-fini"
            ],
            "inbound_features": [
                "pensando.io/app-redir:app-redir",
                "pensando.io/app-redir:app-redir-appid",
                "pensando.io/sfw:sfw",
                "pensando.io/network:qos",
                "pensando.io/network:fwding",
                "pensando.io/network:tunnel",
                "pensando.io/app-redir:app-redir-fini"
            ]
        },
        {
            "name": "alg-cflow",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_RELIABLE_COPY" },
            "outbound_features": [
                "pensando.io/alg_ftp:alg_ftp",
                "pensando.io/alg_tftp:alg_tftp",
                "pensando.io/alg_rpc:alg_rpc",
                "pensando.io/alg_rtsp:alg_rtsp",
                "pensando.io/alg_dns:alg_dns"
            ]
        },
        {
            "name": "tcp-proxy",
            "selector": { "lif": "SERVICE_LIF_TCP_PROXY" },
            "outbound_features": [
                "pensando.io/proxy:tcp",
                "pensando.io/app-redir:app-redir",
                "pensando.io/app-redir:app-redir-appid",
                "pensando.io/app-redir:app-redir-fini"
            ]
        },
        {
            "name": "tls-proxy",
            "selector": { "lif": "SERVICE_LIF_TLS_PROXY"},
            "outbound_features": [
                "pensando.io/proxy:tls"
            ]
        },
        {
            "name": "nacl-redirect",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_NACL_REDIRECT" },
            "outbound_features": [
                "pensando.io/dol:test"
            ]
        },
        {
            "name": "nacl-log",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_NACL_LOG" },
            "outbound_features": [
                "pensando.io/dol:test"
            ]
        },
        {
            "name": "quiesce",
            "selector": { "lif": "HAL_LIF_CPU", "qid": "CPUCB_ID_QUIESCE" },
            "outbound_features": [
                "pensando.io/dol:test",
                "pensando.io/proxy:quiesce"
            ]
        }
    ]
}
