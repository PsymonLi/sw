syntax = "proto3";
package accel_metrics;

import "delphi.proto";

message AccelSeqQueueKey {
    fixed64        lif_id                    = 1;     // Lif id
    uint32         qid                       = 2;     // Queue id
}

message AccelSeqQueueMetrics {
    AccelSeqQueueKey    Key                  = 1;

    delphi.Counter interrupts_raised         = 2;     // Interrupts raised
    delphi.Counter next_dbs_rung             = 3;     // Next doorbells rung
    delphi.Counter seq_descs_processed       = 4;     // SeqSQ descriptors processed
    delphi.Counter seq_descs_aborted         = 5;     // SeqSQ descriptors aborted
    delphi.Counter status_pdma_xfers         = 6;     // Status PDMA transfers
    delphi.Counter hw_desc_xfers             = 7;    // HW descriptor transfers
    delphi.Counter hw_batch_errors           = 8;    // HW batch transfer errors
    delphi.Counter hw_op_errors              = 9;    // HW operation errors
    delphi.Counter aol_pad_reqs              = 10;    // AOL padding requests processed
    delphi.Counter sgl_pad_reqs              = 11;    // SGL padding requests processed
    delphi.Counter sgl_pdma_xfers            = 12;    // SGL PDMA transfers taken
    delphi.Counter sgl_pdma_errors           = 13;    // SGL PDMA errors
    delphi.Counter sgl_pad_only_xfers        = 14;    // SGL PDMA pad-only transfers taken
    delphi.Counter sgl_pad_only_errors       = 15;    // SGL PDMA pad-only errors
    delphi.Counter alt_descs_taken           = 16;    // Times an alternate descriptor were used
    delphi.Counter alt_bufs_taken            = 17;    // Times an alternate source buffer were used
    delphi.Counter len_update_reqs           = 18;    // CP/DC length updates after decrypt
}

enum AccelHwRingId {
    HwRingCp                                 = 0;     // Compression ring
    HwRingCpHot                              = 1;     // Hot compression ring
    HwRingDc                                 = 2;     // Decompression ring
    HwRingDcHot                              = 3;     // Hot decompression ring
    HwRingXtsEncr                            = 4;     // XTS encryption ring
    HwRingXtsDecr                            = 5;     // XTS decryption ring
    HwRingGcmEncr                            = 6;     // GCM encryption ring
    HwRingGcmDecr                            = 7;     // GCM decryption ring
}

message AccelHwRingKey {
    AccelHwRingId  rid                       = 1;     // Ring id
    uint32         sub_rid                   = 2;     // Sub-ring id
}

message AccelHwRingMetrics {
    AccelHwRingKey      Key                  = 1;

    delphi.Counter input_bytes               = 2;     // Total input bytes (not available on some rings)
    delphi.Counter output_bytes              = 3;     // Total output bytes (not available on some rings)
    delphi.Counter soft_resets               = 4;     // # soft resets executed
}

