# $FreeBSD: todo version tag $

KMOD=pnso
SRCS= \
src/osal/linux/kernel/osal_thread.c \
src/osal/linux/kernel/osal_atomic.c \
src/osal/linux/kernel/osal_logger.c \
src/osal/linux/kernel/osal_sys.c \
src/osal/linux/kernel/sim/osal_mem.c \
src/osal/test/osal_test.c \
src/drv/pnso_cp.c \
src/drv/pnso_dc.c \
src/drv/pnso_chksum.c \
src/drv/pnso_hash.c \
src/drv/pnso_cpdc.c \
src/drv/pnso_cpdc_cmn.c \
src/drv/pnso_encrypt.c \
src/drv/pnso_decrypt.c \
src/drv/pnso_xts_cmn.c \
src/drv/pnso_xts.c \
src/drv/pnso_decompact.c \
vnode_if.h \
src/sim/lzrw1-a.c \
src/sim/pnso_sim_api.c \
src/sim/sim_algo.c \
src/sim/sim_chain.c \
src/sim/sim_crypto.c \
src/sim/sim_util.c \
src/sim/sim_worker.c \
third-party/freebsd-crypto/src/crc32.c \
third-party/freebsd-crypto/src/rijndael-alg-fst.c \
third-party/freebsd-crypto/src/rijndael-api.c \
third-party/freebsd-crypto/src/rijndael-api-fst.c \
third-party/freebsd-crypto/src/sha256c.c \
third-party/freebsd-crypto/src/sha512c.c \
third-party/freebsd-crypto/src/xform_aes_xts.c

CFLAGS+= -I${SRC_TOP}/sys/ofed/include
CFLAGS+= -I${SRC_TOP}/sys/compat/linuxkpi/common/include
INCDIRS = include src/osal src/osal/test src/sim third-party/freebsd-crypto/src
CFLAGS+= $(INCDIRS:%=-I$(PWD)/%)
CFLAGS+= -D__KERNEL__

.include <bsd.kmod.mk>

CFLAGS+= -Wno-pointer-arith
