alias_group5:
  - alias: 'pattern1=0x6d6d6d6d6d6d6d6d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'

svc_chains:
  - svc_chain:
      idx: 1
      input:
        pattern: '$pattern1'
        len: '$2block'
        output_file: 'input_uncompressed.bin'
      ops:
        - compress:
            flags: 'zero_pad,insert_header'
            hdr_fmt_idx: 1
            threshold_delta: 8
            output_file: '%chain_id%_compressed.bin'
 
  - svc_chain:
      idx: 2
      input:
        file: '1_compressed.bin'
      ops:
        - decompress:
            flags: 'header_present'
            hdr_fmt_idx: 1
            output_file: '%chain_id%_decompressed.bin'

  - svc_chain:
      idx: 3
      input:
        # 0xd106b591 d1030100
        pattern: >-
          0xfaff6d0401000f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01bfff0f010f010f010f010f010f0100f0fb0201000b0f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ff1f0f010f010f010f010f010f010f010f010f010f010f010f010e01
        output_file: 'hw1_compressed.bin'
      ops:
        - decompress:
            #flags: 'header_present'
            flags: 0
            hdr_fmt_idx: 1
            output_file: '%chain_id%_decompressed.bin'

  - svc_chain:
      idx: 4
      input:
        # 0xd106b591 cc030100
        pattern: >-
          0xfaff6d0401000f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f000f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ffff0f010f010f010f010f010f010f010f010f010f010f010f010f010f010f010f01ff030f010f010f010f010f010f010f010f010f010801
        output_file: 'hw2_compressed.bin'
      ops:
        - decompress:
            #flags: 'header_present'
            flags: 0
            hdr_fmt_idx: 1
            output_file: '%chain_id%_decompressed.bin'
            output_len: '$2block'

  - svc_chain:
      idx: 5
      input:
        random: start_time
        random_len: 128
        len: '$2block'
        output_file: 'random_input.bin'
      ops:
        - compress:
            flags: 'zero_pad,insert_header'
            hdr_fmt_idx: 1
            threshold_delta: 8
            output_file: 'random_compressed.bin'
 
  - svc_chain:
      idx: 6
      input:
        file: 'random_compressed.bin'
      ops:
        - decompress:
            flags: 'header_present'
            hdr_fmt_idx: 1
            output_file: 'random_decompressed.bin'

  - svc_chain:
      idx: 7
      input:
        pattern: '$pattern1'
        len: '$2block'
      ops:
        - compress:
            flags: 'zero_pad,insert_header'
            hdr_fmt_idx: 1
            threshold_delta: 8
            output_file: '%test_id%_hdr_compressed.bin'

  - svc_chain:
      idx: 8
      input:
        file: '7_hdr_compressed.bin'
        offset: 0
      ops:
        - decompress:
            flags: 'header_present'
            hdr_fmt_idx: 1
            output_file: '%test_id%_decompressed.bin'
            output_len: 16384

tests:
  - test:
      idx: 1
      svc_chains: 1
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '1_compressed.bin'
            val: 985
        - data_compare:
            idx: 3
            file1: '1_compressed.bin'
            pattern: 0x00
            offset: eof
            len: eob
        - data_compare:
            idx: 4
            file1: '1_compressed.bin'
            pattern: 0xd106b591d1030100
            len: 8
        - data_input_compare:
            idx: 5
            #file1: 'input_uncompressed.bin'
            pattern: 0x6d6d6d6d6d6d6d6d0000000000000000
            len: 16
        - data_output_compare:
            idx: 6
            file1: '1_compressed.bin'
            len: 8

  - test:
      idx: 2
      svc_chains: 2
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '2_decompressed.bin'
            val: '$2block'
        - data_compare:
            idx: 3
            file1: '2_decompressed.bin'
            file2: 'input_uncompressed.bin'
            len: '$2block'
  - test:
      idx: 3
      svc_chains: 3
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '3_decompressed.bin'
            val: '$2block'
        - data_compare:
            idx: 3
            file1: '3_decompressed.bin'
            file2: 'input_uncompressed.bin'
            len: '$2block'
  - test:
      idx: 4
      svc_chains: 4
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '4_decompressed.bin'
            val: '$2block'
        - data_compare:
            idx: 3
            file1: '4_decompressed.bin'
            file2: 'input_uncompressed.bin'
            len: '$2block'
  - test:
      idx: 5
      svc_chains: 5
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - data_compare:
            idx: 2
            file1: 'random_compressed.bin'
            pattern: 0x00
            offset: eof
            len: eob
        - data_input_compare:
            idx: 3
            file1: 'random_input.bin'
            #pattern: 0x00
            #len: 1
        - data_output_compare:
            idx: 4
            file1: 'random_compressed.bin'
            #pattern: 0xff
            len: 8
        - data_compare:
            idx: 5
            file1: 'random_compressed.bin'
            pattern: 0x0100
            offset: 6
            len: 2

  - test:
      idx: 6
      svc_chains: 6
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: 'random_decompressed.bin'
            val: '$2block'
        - data_output_compare:
            idx: 3
            file1: 'random_input.bin'
            #file1: 'random_compressed.bin'
  - test:
      idx: 7
      svc_chains: 7
      mode: 'async'
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - data_compare:
            idx: 3
            file1: '7_hdr_compressed.bin'
            file2: '1_compressed.bin'
  - test:
      idx: 17
      svc_chains: 7
      mode: 'sim'
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '17_hdr_compressed.bin'
            file2: '7_hdr_compressed.bin'
        - data_compare:
            idx: 3
            file1: '17_hdr_compressed.bin'
            file2: '7_hdr_compressed.bin'
  - test:
      idx: 8
      svc_chains: 8
      mode: 'async'
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 3
            file1: '8_decompressed.bin'
            val: '$2block'
        - data_output_compare:
            idx: 2
            file1: 'input_uncompressed.bin'
  - test:
      idx: 18
      svc_chains: 8
      mode: 'sim'
      repeat: '$iter_low'
      validations:
        - retcode_compare:
            idx: 1
            retcode: 0
            svc_retcodes: 0
        - size_compare:
            idx: 2
            file1: '18_decompressed.bin'
            val: '$2block'
        - data_output_compare:
            idx: 3
            file1: 'input_uncompressed.bin'
