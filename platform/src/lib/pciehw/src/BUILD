package(default_visibility = ["//visibility:public"])
licenses(["notice"])  # MIT license

cc_library(
    name = "libpciehw",
    srcs = [
        "pciehw.c",
        "cfg.c",
        "bar.c",
        "romsk.c",
        "pmt.c",
        "prt.c",
        "vfstride.c",
        "hdrt.c",
        "tgt_port.c",
        "itr_port.c",
        "portmap.c",
        "notify.c",
        "indirect.c",
        "req_int.c",
        "event.c",
        "intr.c",
        "reset.c",
    ],
    hdrs = [
        "event.h",
        "hdrt.h",
        "indirect.h",
        "indirect_reason.h",
        "intr.h",
        "notify.h",
        "pciehw_impl.h",
        "pmt.h",
        "portmap.h",
        "prt.h",
        "req_int.h",
        "reset.h",
        "tlpauxinfo.h",
    ],
    copts = [ "-g",
              "-Iplatform/src/lib/misc/include",
              "-Iplatform/src/lib/intrutils/include",
              "-Iplatform/src/lib/cfgspace/include",
              "-Iplatform/src/lib/pciehost/include",
              "-Iplatform/src/lib/pciehw/include",
              "-Iplatform/src/lib/pcieport/include",
              "-Iplatform/src/lib/pcietlp/include",
              "-Iplatform/src/lib/pal/include",
              "-Iplatform/include/common",
              "-Inic/asic/capri/design/common",
              "-Inic/asic/capri/model/cap_he/readonly",
              "-Inic/asic/capri/model/cap_top/csr_defines",
              "-Inic/asic/capri/model/cap_txs",
              "-Inic/asic/capri/model/cap_top",
    ],
    deps = [
        "//platform/src/lib/misc/include:libmisc_hdrs",
        "//platform/src/lib/cfgspace/include:libcfgspace_hdrs",
        "//platform/src/lib/intrutils/include:libintrutils_hdrs",
        "//platform/src/lib/pciehost/include:libpciehost_hdrs",
        "//platform/src/lib/pciehw/include:libpciehw_hdrs",
        "//platform/src/lib/pciehdevices/include:libpciehdevices_hdrs",
        "//platform/src/lib/pcietlp/include:libpcietlp_hdrs",
        "//platform/src/lib/pcieport/include:libpcieport_hdrs",
        "//platform/src/lib/pal/include:libpal_hdrs",
        "//platform/include/common:platformcommon_hdrs",
        "//nic:platform_asic_hdrs",
    ],
    alwayslink = True,
)

